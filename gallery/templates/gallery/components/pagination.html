{% if groups.paginator.num_pages > 1 %}
<div class="gallery-pagination-wrapper">
    
    {% if groups.has_previous %}
    <a href="?page={{ groups.previous_page_number }}{% if search_query %}&q={{ search_query }}{% endif %}{% if current_filter %}&filter={{ current_filter }}{% endif %}{% if request.GET.search_id %}&search_id={{ request.GET.search_id }}{% endif %}" class="page-btn">
        <i class="bi bi-chevron-left"></i>
    </a>
    {% else %}
    <span class="page-btn disabled"><i class="bi bi-chevron-left"></i></span>
    {% endif %}

    {% for num in page_range|default:groups.paginator.page_range %}
        
        {% if num == groups.paginator.ELLIPSIS %}
            <span class="page-ellipsis">...</span>
        {% else %}
            {% if groups.number == num %}
                <span class="page-btn active">{{ num }}</span>
            {% else %}
                <a href="?page={{ num }}{% if search_query %}&q={{ search_query }}{% endif %}{% if current_filter %}&filter={{ current_filter }}{% endif %}{% if request.GET.search_id %}&search_id={{ request.GET.search_id }}{% endif %}" 
                   class="page-btn">{{ num }}</a>
            {% endif %}
        {% endif %}
        
    {% endfor %}

    {% if groups.has_next %}
    <a href="?page={{ groups.next_page_number }}{% if search_query %}&q={{ search_query }}{% endif %}{% if current_filter %}&filter={{ current_filter }}{% endif %}{% if request.GET.search_id %}&search_id={{ request.GET.search_id }}{% endif %}" class="page-btn">
        <i class="bi bi-chevron-right"></i>
    </a>
    {% else %}
    <span class="page-btn disabled"><i class="bi bi-chevron-right"></i></span>
    {% endif %}

    <div class="page-jump-box">
        <span class="text-muted small me-2">跳至</span>
        <input type="number" id="jumpPageInput" class="page-jump-input" 
               min="1" max="{{ groups.paginator.num_pages }}" 
               placeholder="页码"
               data-max-page="{{ groups.paginator.num_pages }}">
        <button type="button" id="btnJumpPage" class="page-jump-btn">Go</button>
    </div>
</div>
{% endif %}